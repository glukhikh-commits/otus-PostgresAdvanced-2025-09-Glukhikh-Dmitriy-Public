### 1. Создан новый проект в Яндекс облаке.

### 2. Создан инстанс виртуальной машины с параметрами 
```
- Имя: gds-hw1
- Внутренний FQDN: gds-hw1.ru-central1.internal
- OS: Ubuntu 24.04 LTS
- CPU: 2 ( 50%	)
- RAM: 2 ГБ
- SSD: 20 ГБ
```
### 3. Создан свой SSH ключ при помощи kitty_portable.exe -keygen
 
!(SSH-key.png)

### 4. Публичный ключ добавлен в параметры виртуальной машины 
!(VM_params.png)
### 5. Выполнен вход по SSH черз Kitty 
```
Using username "gds-hw1".
Authenticating with public key "rsa-key-20251002"
Passphrase for key "rsa-key-20251002":
Welcome to Ubuntu 24.04.3 LTS (GNU/Linux 6.8.0-84-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/pro

 System information as of Fri Oct  3 07:47:27 UTC 2025

  System load:  0.0                Processes:             130
  Usage of /:   11.3% of 18.72GB   Users logged in:       0
  Memory usage: 14%                IPv4 address for eth0: 10.130.0.21
  Swap usage:   0%
```
### 6. Поставлен PostgreSQL из пакетов apt install (unzip и mc оставлены для удобства дальнейшей работы)
```
sudo apt update && sudo apt upgrade -y && sudo sh -c 'echo "deb http://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main" > /etc/apt/sources.list.d/pgdg.list' && wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add - && sudo apt-get update && sudo apt-get -y install postgresql && sudo apt install unzip && sudo apt -y install mc
```
```
gds-hw1@gds-hw1:~$ pg_lsclusters
Ver Cluster Port Status Owner    Data directory              Log file
18  main    5432 online postgres /var/lib/postgresql/18/main /var/log/postgresql/postgresql-18-main.log
```

### 7. Выполнен второй вход по SSH черз Kitty 

### 8. Везде запущен postgres под пользователем postgres
```
postgres=# create database gds_hw1;
CREATE DATABASE
postgres=# \c
You are now connected to database "postgres" as user "postgres".
postgres=# \c gds_hw1
You are now connected to database "gds_hw1" as user "postgres".
gds_hw1=#
```
### 9. В первой сессии сделана новая таблица и наполнена данными
```
gds_hw1=# CREATE TABLE HW_1 (i serial, amount int);
CREATE TABLE
gds_hw1=# INSERT INTO HW_1(amount) VALUES (200,800);
ERROR:  INSERT has more expressions than target columns
LINE 1: INSERT INTO HW_1(amount) VALUES (200,800);
                                             ^
gds_hw1=# INSERT INTO HW_1(amount) VALUES (200),(800);
INSERT 0 2
gds_hw1=#
```
### 10. Просмотрен текущий уровень изоляции
```
gds_hw1=# SHOW TRANSACTION ISOLATION LEVEL;
transaction_isolation
-----------------------
 read committed
(1 row)
```
### 11. В каждой из консолей начаты новые транзакции (не меняя уровни изоляции)
!(1_new_transaction_begin.png)
### 12. Во второй сессии исправлена вторя запись
```
gds_hw1=# begin;
BEGIN
gds_hw1=*# update hw_1 set amount = 950 where i=2;
UPDATE 1
```
### 13. Просмотрена таблица в первой сессии. Новую запись не видна, так как уровень изоляции read committed не позволяет смотреть не закоммиченные записи в другой транзакции.
```
gds_hw1=*# select * from hw_1;
 i | amount
---+--------
 1 |    200
 2 |    800
(2 rows)
```
### 14. Во второй консоли сделан коммит
```
gds_hw1=*# select * from hw_1;
 i | amount
---+--------
 1 |    200
 2 |    950
(2 rows)
gds_hw1=*# commit;
COMMIT
```
### 15. Просмотрена таблица в первой сессии. Исправленная запись теперь видна, так как был выполнен коммит изменения и уровень изоляции позволяет видеть закоммиченные изменеия в другой транзакции. 
gds_hw1=*# select * from hw_1;\
 i | amount\
---+--------\
 1 |    200\
 2 |    950\
(2 rows)\
### 16. Завершена  транзакция в первой сессии.

### 17.  Начаты новые транзакции с repeatable read
```
gds_hw1=# SET TRANSACTION ISOLATION LEVEL REPEATABLE READ;
WARNING:  SET TRANSACTION can only be used in transaction blocks
SET
gds_hw1=# begin;
BEGIN
gds_hw1=*# SET TRANSACTION ISOLATION LEVEL REPEATABLE READ;
SET
gds_hw1=*#
```
### 18. Во второй консоли добавим новую запись
```
gds_hw1=# begin;
BEGIN
gds_hw1=*# SET TRANSACTION ISOLATION LEVEL REPEATABLE READ;
SET
gds_hw1=*# ^C
gds_hw1=*# insert into hw_1(amount) VALUES (1200);
INSERT 0 1
gds_hw1=*# select * from hw_1;
 i | amount
---+--------
 1 |    200
 2 |    950
 3 |   1200
(3 rows)
```
### 19. Посмотрена таблица в первой сессии. Новая запись не видна, так как уровень изоляции REPEATABLE READ не позволяет видеть не закоммиченные записи в другой транзакции
```
gds_hw1=*# select * from hw_1;
 i | amount
---+--------
 1 |    200
 2 |    950
(2 rows)
```
### 20. Завершена вторая транзакция во второй консоли. Запись в первой тразакции не видна, так как уровень REPEATABLE READ не позволяет видеть закоммиченные записи другой транзакции, сделанные после начала первой транзакции (пока она не завершена)
```
gds_hw1=*# select * from hw_1;
 i | amount
---+--------
 1 |    200
 2 |    950
(2 rows)
```

### 21. Завершена транзакция в первой сессии. Теперь при select новая запись будет видна. 
```
gds_hw1=*# commit;
COMMIT
gds_hw1=# select * from hw_1;
 i | amount
---+--------
 1 |    200
 2 |    950
 3 |   1200
(3 rows)
```

